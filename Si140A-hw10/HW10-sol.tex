\documentclass{article}

\usepackage{fancyhdr}
\usepackage{extramarks}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amsfonts}
\usepackage{tikz}
\usepackage[plain]{algorithm}
\usepackage{algpseudocode}
\usepackage{enumerate}
\usepackage{tikz}

\usetikzlibrary{automata,positioning}

%
% Basic Document Settings
%  

\topmargin=-0.45in
\evensidemargin=0in
\oddsidemargin=0in
\textwidth=6.5in
\textheight=9.0in
\headsep=0.25in

\linespread{1.1}

\pagestyle{fancy}
\lhead{\hmwkAuthorName}
\chead{\hmwkClass : \hmwkTitle}
\rhead{\firstxmark}
\lfoot{\lastxmark}
\cfoot{\thepage}

\renewcommand\headrulewidth{0.4pt}
\renewcommand\footrulewidth{0.4pt}

\setlength\parindent{0pt}

%
% Create Problem Sections
%

\newcommand{\enterProblemHeader}[1]{
    \nobreak\extramarks{}{Problem \arabic{#1} continued on next page\ldots}\nobreak{}
    \nobreak\extramarks{Problem \arabic{#1} (continued)}{Problem \arabic{#1} continued on next page\ldots}\nobreak{}
}

\newcommand{\exitProblemHeader}[1]{
    \nobreak\extramarks{Problem \arabic{#1} (continued)}{Problem \arabic{#1} continued on next page\ldots}\nobreak{}
    \stepcounter{#1}
    \nobreak\extramarks{Problem \arabic{#1}}{}\nobreak{}
}

\newcommand*\circled[1]{\tikz[baseline=(char.base)]{
		\node[shape=circle,draw,inner sep=2pt] (char) {#1};}}


\setcounter{secnumdepth}{0}
\newcounter{partCounter}
\newcounter{homeworkProblemCounter}
\setcounter{homeworkProblemCounter}{1}
\nobreak\extramarks{Problem \arabic{homeworkProblemCounter}}{}\nobreak{}

%
% Homework Problem Environment
%
% This environment takes an optional argument. When given, it will adjust the
% problem counter. This is useful for when the problems given for your
% assignment aren't sequential. See the last 3 problems of this template for an
% example.
%

\newenvironment{homeworkProblem}[1][-1]{
    \ifnum#1>0
        \setcounter{homeworkProblemCounter}{#1}
    \fi
    \section{Problem \arabic{homeworkProblemCounter}}
    \setcounter{partCounter}{1}
    \enterProblemHeader{homeworkProblemCounter}
}{
    \exitProblemHeader{homeworkProblemCounter}
}

%
% Homework Details
%   - Title
%   - Class
%   - Due date
%   - Name
%   - Student ID

\newcommand{\hmwkTitle}{Homework\ \#010}
\newcommand{\hmwkClass}{Probability \& Statistics for EECS}
\newcommand{\hmwkDueDate}{Apr 23, 2023}
\newcommand{\hmwkAuthorName}{Wang Penghao}
\newcommand{\hmwkAuthorID}{2021533138}


%
% Title Page
%

\title{
    \vspace{2in}
    \textmd{\textbf{\hmwkClass:\\  \hmwkTitle}}\\
    \normalsize\vspace{0.1in}\small{Due\ on\ \hmwkDueDate\ at 23:59}\\
	\vspace{4in}
}

\author{
	Name: \textbf{\hmwkAuthorName} \\
	Student ID: \hmwkAuthorID}
\date{}

\renewcommand{\part}[1]{\textbf{\large Part \Alph{partCounter}}\stepcounter{partCounter}\\}

%
% Various Helper Commands
%

% Useful for algorithms
\newcommand{\alg}[1]{\textsc{\bfseries \footnotesize #1}}
% For derivatives
\newcommand{\deriv}[1]{\frac{\mathrm{d}}{\mathrm{d}x} (#1)}
% For partial derivatives
\newcommand{\pderiv}[2]{\frac{\partial}{\partial #1} (#2)}
% Integral dx
\newcommand{\dx}{\mathrm{d}x}
% Alias for the Solution section header
\newcommand{\solution}{\textbf{\large Solution}}
% Probability commands: Expectation, Variance, Covariance, Bias
\newcommand{\E}{\mathrm{E}}
\newcommand{\Var}{\mathrm{Var}}
\newcommand{\Cov}{\mathrm{Cov}}
\newcommand{\Bias}{\mathrm{Bias}}

\begin{document}

\maketitle

\pagebreak

\begin{homeworkProblem}[1]

\begin{enumerate}[(1)]
    \item As for X discrete, Y discrete, we have that 
        $$P(X = x) = \sum_{y}^{} P(X = x, Y = y) = \sum_{y}^{} P(X = x | Y = y) P(Y = y)$$
    \item As for X continuous, Y discrete, we have that 
        $$P(X = x) = \sum_{-\infty}^{\infty}P(X = x | Y = y)f_Y(y)dy$$
        Then we have that, $$\lim_{\varepsilon \to 0}P(X \in (x - \varepsilon, x + \varepsilon)) = \lim_{\varepsilon \to 0} \sum_{y}^{}P(X \in (x - \varepsilon, x + \varepsilon) | Y = y)P(Y = y) $$
        So we have that $$f_X(x) = \sum_{y}^{} f_X(x | Y = y)P(Y = y)$$
    \item As for X discrete, Y continuous, as we have that
        $$P(X = x | Y = y) = \dfrac{f_Y(y | X = x)P(X = x)}{f_Y(y)}$$
        Then we have $$P(X = x | Y = y)f_Y(y) = f_Y(y | X = x)P(X = x)$$
        Then we integrate both sides with respect to y, we have that
        $$\int_{-\infty}^{\infty}P(X = x | Y = y)f_Y(y)dy = \int_{-\infty}^{\infty}f_Y(y | X = x)P(X = x)dy$$
        Then we have that $$f_X(x) = \int_{-\infty}^{\infty}f_Y(y | X = x)P(X = x)dy = P(X = x)$$
        So we get that $$P(X = x) = \int_{-\infty}^{\infty}P(X = x | Y = y)f_Y(y)dy$$
    \item As for X continuous, Y continuous, we have 
        $$f_X(x) = \int_{-\infty}^{\infty}f_{X, Y}(x, y)dy = \int_{-\infty}^{\infty}f_{Y | X}(y | x)f_X(x)dy = \int_{-\infty}^{\infty}f_{Y | X}(y | x) dy$$
        So we get that $$f_X(x) = \int_{-\infty}^{\infty}f_{Y|X}(y | x)dy$$
\end{enumerate}

\end{homeworkProblem}

\newpage

\begin{homeworkProblem}[2]

\begin{enumerate}
    \item First, we let $U$ be that the arrival time of the next Blissville company bus, then $U \sim Unif(0, 15)$ as the bus comes every 15 minutes, 
        then we let $X \sim Expo(\dfrac{1}{15})$ is that be the arrival time of the next Blotchville company bus, then we have that 
        $$P(X < U) = \int_{0}^{15} P(X < U | U = u)\dfrac{1}{15}du$$
        So we have that $$P(X < U) = \dfrac{1}{15}\int_{0}^{15}(1 - e^{-\dfrac{u}{15}})du = \dfrac{1}{e}$$
    \item As for the wait time, that is the wait until the first bus comes. Denote that the wait time is $W$, then we have $W = min(X, U)$
        Then as for the CDF, we firstly calculate the $P(W > t)$, then we have that $$P(W > t) = P(X > t, U > t) = P(X > t)P(U > t) = e^{-\dfrac{t}{15}}(1 - \frac{t}{15})$$
        So we get that the CDF of the waiting time is that $$P(W \leq t) = 1 - P(W > t) = 1 - e^{-\dfrac{t}{15}}(1 - \dfrac{t}{15}), $$
        where $t \in (0, 10)$ and CDF is 0 for $t \leq 0$ and 1 for $t \geq 10$.
\end{enumerate}

\end{homeworkProblem}

\newpage

\begin{homeworkProblem}[3]

\begin{enumerate}[(a)]
    \item Firstly we denote that p is the probability that an egg hatch, and $q = 1 - p$. As we have that X is the number which hatch, and that Y is the number which do not hatch, we have that $N = X + Y$, 
        then we have that $N, X, Y$ are dependent, as $N$ is the sum of two variables. 
        Then we have that 
        $$\begin{aligned} P(N = n, X = x, Y = y) &= P(X = x, Y = y) \\
             &= \sum_{n = 0}^{\infty} P(X = x, Y = y | N = n)P(N = n) \\
             &= P(X = x, Y = y | N = x + y)P(N = x + y) \\
             &= P(X = x | N = x + y)P(N = x + y) \\
             &= \begin{pmatrix}
                    x + y \\
                    x
                \end{pmatrix} p^xq^y\dfrac{e^{-\lambda} \lambda^{x + y}}{(x + y)!} \\
            &= \dfrac{e^{-\lambda p}(\lambda p)^x}{x!}\dfrac{e^{-\lambda p}(\lambda p)^y}{y!}
        \end{aligned}$$
        Where $n$, $x$, $y$ are nonnegative integers and $n = x + y$. N, X, Y are not independent, but as X and Y are independent, we also get that $X \sim Pois(\lambda p)$, $Y \sim Pois(\lambda q)$
    \item As for the joint PMF of N, X, as from (a) we have that $X \sim Pois(\lambda p)$ and that $Y \sim Pois(\lambda q)$
        Then we have $$P(N = n, X = x) = P(X = x, Y = n - x) = \dfrac{e^{-\lambda p}{\lambda p}^x}{x!} \dfrac{e^{-\lambda q}{\lambda q}^{n - x}}{(n - x)!},$$ where $n \geq x$ and that X and N are dependent as $N \geq X$
    \item As for joint PMF of X, Y, from (a) we have that $$P(X = x, Y = y) = \dfrac{e^{-\lambda p}(\lambda p)^x}{x!}\dfrac{e^{-\lambda p}(\lambda p)^y}{y!}$$ where x and y are nonnegative integers
    \item As for the relationship of X and N, from (a) we have that $X \sim Pois(\lambda p)$ and $Y \sim Pois(\lambda q)$, 
        then we have that $$Cov(N, X) = Cov(X + Y, X) = Cov(X, X) + Cov(Y, X)$$
        As X and Y are independent, then
        $$Cov(N, X) = Var(X) = \lambda p$$
        We then have $$Corr(N, X) = \dfrac{Cov(X, Y)}{\sqrt{Var(X)Var(Y)}} = \dfrac{\lambda p}{\sqrt{\lambda\lambda p}} = \sqrt{p}$$
\end{enumerate}

\end{homeworkProblem}

\newpage

\begin{homeworkProblem}[4]

Denote that the two measurements are $X, Y$, as they are 2 independent standard Normal random variables, so $X$, $Y$ i.i.d. $\sim N(0, 1)$ and denote that $M = max(X, Y)$, $L = min(X, Y)$ \\
So $max(x, y) + min(x, y) = x + y$, and $max(x, y) - min(x, y) = |x - y|$, we then have that
$$E(M) + E(L) = E(M + L) = E(X + Y) = E(X) + E(Y) = 0$$

\end{homeworkProblem}

\newpage

\begin{homeworkProblem}[5]



\end{homeworkProblem}

\end{document}
